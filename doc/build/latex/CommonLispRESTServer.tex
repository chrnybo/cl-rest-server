%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,10pt,english]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax

\PassOptionsToPackage{warn}{textcomp}
\usepackage[utf8]{inputenc}
\ifdefined\DeclareUnicodeCharacter
% support both utf8 and utf8x syntaxes
  \ifdefined\DeclareUnicodeCharacterAsOptional
    \def\sphinxDUC#1{\DeclareUnicodeCharacter{"#1}}
  \else
    \let\sphinxDUC\DeclareUnicodeCharacter
  \fi
  \sphinxDUC{00A0}{\nobreakspace}
  \sphinxDUC{2500}{\sphinxunichar{2500}}
  \sphinxDUC{2502}{\sphinxunichar{2502}}
  \sphinxDUC{2514}{\sphinxunichar{2514}}
  \sphinxDUC{251C}{\sphinxunichar{251C}}
  \sphinxDUC{2572}{\textbackslash}
\fi
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}



\usepackage{times}
\expandafter\ifx\csname T@LGR\endcsname\relax
\else
% LGR was declared as font encoding
  \substitutefont{LGR}{\rmdefault}{cmr}
  \substitutefont{LGR}{\sfdefault}{cmss}
  \substitutefont{LGR}{\ttdefault}{cmtt}
\fi
\expandafter\ifx\csname T@X2\endcsname\relax
  \expandafter\ifx\csname T@T2A\endcsname\relax
  \else
  % T2A was declared as font encoding
    \substitutefont{T2A}{\rmdefault}{cmr}
    \substitutefont{T2A}{\sfdefault}{cmss}
    \substitutefont{T2A}{\ttdefault}{cmtt}
  \fi
\else
% X2 was declared as font encoding
  \substitutefont{X2}{\rmdefault}{cmr}
  \substitutefont{X2}{\sfdefault}{cmss}
  \substitutefont{X2}{\ttdefault}{cmtt}
\fi


\usepackage[Bjarne]{fncychap}
\usepackage{sphinx}

\fvset{fontsize=\small}
\usepackage{geometry}


% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}

\usepackage{sphinxmessages}
\setcounter{tocdepth}{1}



\title{Common Lisp REST Server Documentation}
\date{Dec 23, 2020}
\release{0.2}
\author{Mariano Montone}
\newcommand{\sphinxlogo}{\vbox{}}
\renewcommand{\releasename}{Release}
\makeindex
\begin{document}

\pagestyle{empty}
\sphinxmaketitle
\pagestyle{plain}
\sphinxtableofcontents
\pagestyle{normal}
\phantomsection\label{\detokenize{index::doc}}


Contents:


\chapter{Introduction}
\label{\detokenize{introduction:introduction}}\label{\detokenize{introduction::doc}}
\sphinxstylestrong{rest\sphinxhyphen{}server} is a Common Lisp library for implementing REST APIs providers


\section{Features}
\label{\detokenize{introduction:features}}\begin{itemize}
\item {} 
Method matching
\sphinxhyphen{} Based on HTTP method (GET, PUT, POST, DELETE)
\sphinxhyphen{} Based on Accept request header
\sphinxhyphen{} URL parsing (argument types)

\item {} 
Serialization
\sphinxhyphen{} Different serialization types (JSON, XML, S\sphinxhyphen{}expressions)

\item {} 
Error handling
\sphinxhyphen{} HTTP error codes
\sphinxhyphen{} Development and production modes

\item {} 
Validation via schemas

\item {} 
Annotations for api logging, caching, permission checking, and more.

\item {} 
Authentication
\sphinxhyphen{} Different methods (token based, oauth)

\item {} 
Documentation
\sphinxhyphen{} Via Swagger: \sphinxurl{http://swagger.wordnik.com}

\end{itemize}


\chapter{Install}
\label{\detokenize{install:install}}\label{\detokenize{install::doc}}
Download the source code from \sphinxurl{https://github.com/mmontone/cl-rest-server} and point \sphinxtitleref{.asd} system definition files from \sphinxcode{\sphinxupquote{./sbcl/system (ln \sphinxhyphen{}s \textless{}system definition file path\textgreater{})}} and then evaluate:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{(}\PYG{n+nb}{require} \PYG{l+s+ss}{:rest\PYGZhy{}server}\PYG{p}{)}
\end{sphinxVerbatim}

from your lisp listener.

You will also need to satisfy these system dependencies:
\begin{itemize}
\item {} 
\sphinxtitleref{alexandria}

\item {} 
\sphinxtitleref{cxml} and \sphinxtitleref{cl\sphinxhyphen{}json} for the serialization module

\item {} 
\sphinxtitleref{cl\sphinxhyphen{}ppcre} for the validation module

\end{itemize}

The easiest way of installing those packages is via \sphinxhref{http://www.quicklisp.org}{Quicklisp}

This library is under the MIT licence.


\chapter{API definition}
\label{\detokenize{api:api-definition}}\label{\detokenize{api::doc}}
APIs are defined using the {\hyperref[\detokenize{api:macro:rest-server:define-api}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{DEFINE\sphinxhyphen{}API}}}}} macro. APIs contain resources and resources contain api\sphinxhyphen{}functions.
\index{define\sphinxhyphen{}api (Lisp macro)@\spxentry{define\sphinxhyphen{}api}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:macro:rest-server:define-api}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{macro }}}{\sphinxbfcode{\sphinxupquote{define\sphinxhyphen{}api}}\emph{name} \emph{superclasses} \emph{options} \emph{\&body} \emph{resources}}{}
Define an api.

\end{fulllineitems}


This is the syntax:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{(}\PYG{n+nv}{define\PYGZhy{}api} \PYG{n+nv}{\PYGZlt{}api\PYGZhy{}name\PYGZgt{}} \PYG{p}{(}\PYG{k}{\PYGZam{}rest} \PYG{n+nv}{\PYGZlt{}superclasses\PYGZgt{}}\PYG{p}{)} \PYG{n+nv}{\PYGZlt{}options\PYGZhy{}plist\PYGZgt{}}
   \PYG{k}{\PYGZam{}rest}
   \PYG{n+nv}{\PYGZlt{}resources\PYGZgt{}}\PYG{p}{)}
\end{sphinxVerbatim}


\section{API options}
\label{\detokenize{api:api-options}}\begin{itemize}
\item {} 
\sphinxcode{\sphinxupquote{:title}}: The API title. This appears in the generated API documentation

\item {} 
\sphinxcode{\sphinxupquote{:documentation}}: A string with the API description. This appears in the generated API documentation.

\end{itemize}


\section{Resources}
\label{\detokenize{api:resources}}
Resources have the following syntax:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{(}\PYG{n+nv}{\PYGZlt{}resource\PYGZhy{}name\PYGZgt{}} \PYG{n+nv}{\PYGZlt{}resource\PYGZhy{}options\PYGZgt{}} \PYG{n+nv}{\PYGZlt{}api\PYGZhy{}functions\PYGZgt{}}\PYG{p}{)}
\end{sphinxVerbatim}

Resources can be added to an already defined API via the :cl:function::\sphinxtitleref{with\sphinxhyphen{}api} and {\hyperref[\detokenize{api:macro:rest-server:define-api-resource}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{define\sphinxhyphen{}api\sphinxhyphen{}resource}}}}} macros
\index{with\sphinxhyphen{}api (Lisp macro)@\spxentry{with\sphinxhyphen{}api}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:macro:rest-server:with-api}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{macro }}}{\sphinxbfcode{\sphinxupquote{with\sphinxhyphen{}api}}\emph{api} \emph{\&body} \emph{body}}{}~\begin{description}
\item[{Execute body under api scope.}] \leavevmode
Example:
(with\sphinxhyphen{}api test\sphinxhyphen{}api
\begin{quote}
\begin{description}
\item[{(define\sphinxhyphen{}resource\sphinxhyphen{}operation get\sphinxhyphen{}user :get (:url\sphinxhyphen{}prefix “users/\{id\}”)}] \leavevmode
‘((:id :integer))))

\end{description}
\end{quote}

\end{description}

\end{fulllineitems}

\index{define\sphinxhyphen{}api\sphinxhyphen{}resource (Lisp macro)@\spxentry{define\sphinxhyphen{}api\sphinxhyphen{}resource}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:macro:rest-server:define-api-resource}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{macro }}}{\sphinxbfcode{\sphinxupquote{define\sphinxhyphen{}api\sphinxhyphen{}resource}}\emph{name} \emph{options} \emph{\&body} \emph{functions}}{}
Define an api resource.

\end{fulllineitems}



\subsection{Resource options}
\label{\detokenize{api:resource-options}}\begin{itemize}
\item {} 
\sphinxcode{\sphinxupquote{:produces}}: A list of content types produced by this resource. The content types can be \sphinxcode{\sphinxupquote{:json}}, \sphinxcode{\sphinxupquote{:html}}, \sphinxcode{\sphinxupquote{:xml}}, \sphinxcode{\sphinxupquote{:lisp}}

\item {} 
\sphinxcode{\sphinxupquote{:consumes}}: A list of content types consumed by this resource.

\item {} 
\sphinxcode{\sphinxupquote{:documentation}}: A string describing the resource. This appears in the generated API documentation.

\item {} 
\sphinxcode{\sphinxupquote{:path}}: The resource path. Should start with the \sphinxtitleref{/} character. Ex: \sphinxtitleref{“/users”}

\item {} 
\sphinxcode{\sphinxupquote{:models}}: A list of \sphinxtitleref{models} used by the resource

\end{itemize}


\section{Resource operations}
\label{\detokenize{api:resource-operations}}
Resources provide a set of operations to access them.

They have the following syntax:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{(}\PYG{n+nv}{\PYGZlt{}resource\PYGZhy{}operation\PYGZhy{}name\PYGZgt{}} \PYG{n+nv}{\PYGZlt{}resource\PYGZhy{}operation\PYGZhy{}options\PYGZgt{}} \PYG{n+nv}{\PYGZlt{}resource\PYGZhy{}operation\PYGZhy{}arguments\PYGZgt{}}\PYG{p}{)}
\end{sphinxVerbatim}

New operations can be added to an already defined resource via the {\hyperref[\detokenize{api:macro:rest-server:with-api-resource}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{with\sphinxhyphen{}api\sphinxhyphen{}resource}}}}}
\index{with\sphinxhyphen{}api\sphinxhyphen{}resource (Lisp macro)@\spxentry{with\sphinxhyphen{}api\sphinxhyphen{}resource}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:macro:rest-server:with-api-resource}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{macro }}}{\sphinxbfcode{\sphinxupquote{with\sphinxhyphen{}api\sphinxhyphen{}resource}}\emph{resource} \emph{\&body} \emph{body}}{}~\begin{description}
\item[{Execute body under resource scope.}] \leavevmode
Example:
(with\sphinxhyphen{}api\sphinxhyphen{}resource users
\begin{quote}
\begin{description}
\item[{(define\sphinxhyphen{}resource\sphinxhyphen{}operation get\sphinxhyphen{}user :get (:url\sphinxhyphen{}prefix “users/\{id\}”)}] \leavevmode
‘((:id :integer))))

\end{description}
\end{quote}

\end{description}

\end{fulllineitems}



\subsection{Resource operation options}
\label{\detokenize{api:resource-operation-options}}\begin{itemize}
\item {} 
\sphinxcode{\sphinxupquote{:request\sphinxhyphen{}method}}: The HTTP request method

\item {} 
\sphinxcode{\sphinxupquote{:path}}: The operation path. Arguments in the operation are enclosed between \sphinxcode{\sphinxupquote{\{\}}}. For example: \sphinxcode{\sphinxupquote{"/users/\{id\}"}}.

\item {} 
\sphinxcode{\sphinxupquote{:produces}}: A list of content types produced by the operation. The content types can be \sphinxcode{\sphinxupquote{:json}}, \sphinxcode{\sphinxupquote{:html}}, \sphinxcode{\sphinxupquote{:xml}}, \sphinxcode{\sphinxupquote{:lisp}}. This is matched with the HTTP “Accept” header.

\item {} 
\sphinxcode{\sphinxupquote{:consumes}}: A list of content types that the operation can consume.

\item {} 
\sphinxcode{\sphinxupquote{:authorizations}}: A list with the authorizations required for the operation. Can be one of \sphinxcode{\sphinxupquote{:token}}, \sphinxcode{\sphinxupquote{:oauth}}, \sphinxcode{\sphinxupquote{:oauth}}, or a custom authorization type.

\item {} 
\sphinxcode{\sphinxupquote{:documentation}}: A string describing the operation. This appears in the generated API documentation.

\end{itemize}


\subsection{Resource operation arguments}
\label{\detokenize{api:resource-operation-arguments}}
Arguments lists have the following syntax:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{(}\PYG{n+nv}{*\PYGZlt{}required\PYGZhy{}arguments\PYGZgt{}} \PYG{k}{\PYGZam{}optional} \PYG{n+nv}{\PYGZlt{}optional\PYGZhy{}arguments\PYGZgt{}}\PYG{p}{)}
\end{sphinxVerbatim}

Required arguments are those appearing in the api function path between \sphinxcode{\sphinxupquote{\{\}}}.
They are specified like this:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{(}\PYG{n+nv}{\PYGZlt{}argument\PYGZhy{}name\PYGZgt{}} \PYG{n+nv}{\PYGZlt{}argument\PYGZhy{}type\PYGZgt{}} \PYG{n+nv}{\PYGZlt{}documentation\PYGZhy{}string\PYGZgt{}}\PYG{p}{)}
\end{sphinxVerbatim}

Argument type can be one of: \sphinxcode{\sphinxupquote{string}}, \sphinxcode{\sphinxupquote{integer}}, \sphinxcode{\sphinxupquote{boolean}}, \sphinxcode{\sphinxupquote{list}}.

Optional arguments are those that can be passed after the \sphinxcode{\sphinxupquote{?}} in the url. For instance, the \sphinxcode{\sphinxupquote{page}} parameter in this url: \sphinxcode{\sphinxupquote{/users?page=1}}. They are listed after the \sphinxcode{\sphinxupquote{\&optional}} symbol, and have the following syntax:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{(}\PYG{n+nv}{\PYGZlt{}argument\PYGZhy{}name\PYGZgt{}} \PYG{n+nv}{\PYGZlt{}argument\PYGZhy{}type\PYGZgt{}} \PYG{n+nv}{\PYGZlt{}default\PYGZhy{}value\PYGZgt{}} \PYG{n+nv}{\PYGZlt{}documentation\PYGZhy{}string\PYGZgt{}}\PYG{p}{)}
\end{sphinxVerbatim}

Here is an example of an api function arguments list:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{(}\PYG{p}{(}\PYG{n+nv}{id} \PYG{l+s+ss}{:integer} \PYG{l+s}{\PYGZdq{}The user id\PYGZdq{}}\PYG{p}{)}
  \PYG{k}{\PYGZam{}optional} \PYG{p}{(}\PYG{k+kt}{boolean} \PYG{l+s+ss}{:boolean} \PYG{n+no}{nil} \PYG{l+s}{\PYGZdq{}A boolean parameter\PYGZdq{}}\PYG{p}{)}
            \PYG{p}{(}\PYG{n+nc}{integer} \PYG{l+s+ss}{:integer} \PYG{n+no}{nil} \PYG{l+s}{\PYGZdq{}An integer parameter\PYGZdq{}}\PYG{p}{)}
            \PYG{p}{(}\PYG{n+nb}{string} \PYG{l+s+ss}{:string} \PYG{n+no}{nil} \PYG{l+s}{\PYGZdq{}A string parameter\PYGZdq{}}\PYG{p}{)}
            \PYG{p}{(}\PYG{n+nb}{list} \PYG{l+s+ss}{:list} \PYG{n+no}{nil} \PYG{l+s}{\PYGZdq{}A list parameter\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}


\section{API example}
\label{\detokenize{api:api-example}}
Here is a complete example of an API interface:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{(}\PYG{n+nv}{define\PYGZhy{}api} \PYG{n+nv}{api\PYGZhy{}test} \PYG{p}{(}\PYG{p}{)}
    \PYG{p}{(}\PYG{l+s+ss}{:title} \PYG{l+s}{\PYGZdq{}Api test\PYGZdq{}}
            \PYG{l+s+ss}{:documentation} \PYG{l+s}{\PYGZdq{}This is an api test\PYGZdq{}}\PYG{p}{)}
  \PYG{p}{(}\PYG{n+nv}{parameters} \PYG{p}{(}\PYG{l+s+ss}{:produces} \PYG{p}{(}\PYG{l+s+ss}{:json}\PYG{p}{)}
                         \PYG{l+s+ss}{:consumes} \PYG{p}{(}\PYG{l+s+ss}{:json}\PYG{p}{)}
                         \PYG{l+s+ss}{:documentation} \PYG{l+s}{\PYGZdq{}Parameters test\PYGZdq{}}
                         \PYG{l+s+ss}{:path} \PYG{l+s}{\PYGZdq{}/parameters\PYGZdq{}}\PYG{p}{)}
              \PYG{p}{(}\PYG{n+nv}{parameters} \PYG{p}{(}\PYG{l+s+ss}{:produces} \PYG{p}{(}\PYG{l+s+ss}{:json}\PYG{p}{)}
                                     \PYG{l+s+ss}{:consumes} \PYG{p}{(}\PYG{l+s+ss}{:json}\PYG{p}{)}
                                     \PYG{l+s+ss}{:documentation} \PYG{l+s}{\PYGZdq{}Parameters test\PYGZdq{}}
                                     \PYG{l+s+ss}{:path} \PYG{l+s}{\PYGZdq{}/parameters\PYGZdq{}}\PYG{p}{)}
                          \PYG{p}{(}\PYG{k}{\PYGZam{}optional} \PYG{p}{(}\PYG{k+kt}{boolean} \PYG{l+s+ss}{:boolean} \PYG{n+no}{nil} \PYG{l+s}{\PYGZdq{}A boolean parameter\PYGZdq{}}\PYG{p}{)}
                                     \PYG{p}{(}\PYG{n+nc}{integer} \PYG{l+s+ss}{:integer} \PYG{n+no}{nil} \PYG{l+s}{\PYGZdq{}An integer parameter\PYGZdq{}}\PYG{p}{)}
                                     \PYG{p}{(}\PYG{n+nb}{string} \PYG{l+s+ss}{:string} \PYG{n+no}{nil} \PYG{l+s}{\PYGZdq{}A string parameter\PYGZdq{}}\PYG{p}{)}
                                     \PYG{p}{(}\PYG{n+nb}{list} \PYG{l+s+ss}{:list} \PYG{n+no}{nil} \PYG{l+s}{\PYGZdq{}A list parameter\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}
  \PYG{p}{(}\PYG{n+nv}{users} \PYG{p}{(}\PYG{l+s+ss}{:produces} \PYG{p}{(}\PYG{l+s+ss}{:json} \PYG{l+s+ss}{:xml}\PYG{p}{)}
                    \PYG{l+s+ss}{:consumes} \PYG{p}{(}\PYG{l+s+ss}{:json}\PYG{p}{)}
                    \PYG{l+s+ss}{:documentation} \PYG{l+s}{\PYGZdq{}Users operations\PYGZdq{}}
                    \PYG{l+s+ss}{:models} \PYG{p}{(}\PYG{n+nv}{user}\PYG{p}{)}
                    \PYG{l+s+ss}{:path} \PYG{l+s}{\PYGZdq{}/users\PYGZdq{}}\PYG{p}{)}
         \PYG{p}{(}\PYG{n+nv}{get\PYGZhy{}users} \PYG{p}{(}\PYG{l+s+ss}{:request\PYGZhy{}method} \PYG{l+s+ss}{:get}
                                     \PYG{l+s+ss}{:produces} \PYG{p}{(}\PYG{l+s+ss}{:json}\PYG{p}{)}
                                     \PYG{l+s+ss}{:path} \PYG{l+s}{\PYGZdq{}/users\PYGZdq{}}
                                     \PYG{l+s+ss}{:documentation} \PYG{l+s}{\PYGZdq{}Retrive the users list\PYGZdq{}}\PYG{p}{)}
                    \PYG{p}{(}\PYG{k}{\PYGZam{}optional} \PYG{p}{(}\PYG{n+nv}{page} \PYG{l+s+ss}{:integer} \PYG{l+m+mi}{1} \PYG{l+s}{\PYGZdq{}The page\PYGZdq{}}\PYG{p}{)}
                               \PYG{p}{(}\PYG{n+nv}{expand} \PYG{l+s+ss}{:list} \PYG{n+no}{nil} \PYG{l+s}{\PYGZdq{}Attributes to expand\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}
         \PYG{p}{(}\PYG{n+nv}{get\PYGZhy{}user} \PYG{p}{(}\PYG{l+s+ss}{:request\PYGZhy{}method} \PYG{l+s+ss}{:get}
                                    \PYG{l+s+ss}{:produces} \PYG{p}{(}\PYG{l+s+ss}{:json}\PYG{p}{)}
                                    \PYG{l+s+ss}{:path} \PYG{l+s}{\PYGZdq{}/users/\PYGZob{}id\PYGZcb{}\PYGZdq{}}
                                    \PYG{l+s+ss}{:documentation} \PYG{l+s}{\PYGZdq{}Retrive an user\PYGZdq{}}\PYG{p}{)}
                   \PYG{p}{(}\PYG{p}{(}\PYG{n+nv}{id} \PYG{l+s+ss}{:integer} \PYG{l+s}{\PYGZdq{}The user id\PYGZdq{}}\PYG{p}{)}
                    \PYG{k}{\PYGZam{}optional}
                    \PYG{p}{(}\PYG{n+nv}{expand} \PYG{l+s+ss}{:list} \PYG{n+no}{nil} \PYG{l+s}{\PYGZdq{}Attributes to expand\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}


\chapter{API implementation}
\label{\detokenize{api:api-implementation}}
APIs need to implement its resources operations. This is done via the {\hyperref[\detokenize{api:macro:rest-server:implement-resource-operation}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{implement\sphinxhyphen{}resource\sphinxhyphen{}operation}}}}} macro.
\index{implement\sphinxhyphen{}resource\sphinxhyphen{}operation (Lisp macro)@\spxentry{implement\sphinxhyphen{}resource\sphinxhyphen{}operation}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:macro:rest-server:implement-resource-operation}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{macro }}}{\sphinxbfcode{\sphinxupquote{implement\sphinxhyphen{}resource\sphinxhyphen{}operation}}\emph{api\sphinxhyphen{}name} \emph{name\sphinxhyphen{}and\sphinxhyphen{}options} \emph{args} \emph{\&body} \emph{body}}{}
Define an resource operation implementation

\end{fulllineitems}


The required arguments of the resource operation appear as normal arguments in the function, in the order in which they were declared. The optional arguments of a resource operation appear as \sphinxtitleref{\&key} arguments of the function. In case the resource operation request method is either \sphinxstylestrong{PUT} or \sphinxstylestrong{POST}, then a {\color{red}\bfseries{}\textasciigrave{}\textasciigrave{}}posted\sphinxhyphen{}content\textasciigrave{} argument should be added to the implementation function as the first argument.

Some examples:

For this operation:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{(}\PYG{n+nv}{get\PYGZhy{}user} \PYG{p}{(}\PYG{l+s+ss}{:request\PYGZhy{}method} \PYG{l+s+ss}{:get}
                     \PYG{l+s+ss}{:produces} \PYG{p}{(}\PYG{l+s+ss}{:json}\PYG{p}{)}
                     \PYG{l+s+ss}{:path} \PYG{l+s}{\PYGZdq{}/users/\PYGZob{}id\PYGZcb{}\PYGZdq{}}
                     \PYG{l+s+ss}{:documentation} \PYG{l+s}{\PYGZdq{}Retrive an user\PYGZdq{}}\PYG{p}{)}
                    \PYG{p}{(}\PYG{p}{(}\PYG{n+nv}{id} \PYG{l+s+ss}{:integer} \PYG{l+s}{\PYGZdq{}The user id\PYGZdq{}}\PYG{p}{)}
                     \PYG{k}{\PYGZam{}optional}
                     \PYG{p}{(}\PYG{n+nv}{expand} \PYG{l+s+ss}{:list} \PYG{n+no}{nil} \PYG{l+s}{\PYGZdq{}Attributes to expand\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}

The following resource implementation should be defined:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{(}\PYG{n+nv}{implement\PYGZhy{}resource\PYGZhy{}operation} \PYG{n+nv}{get\PYGZhy{}user} \PYG{p}{(}\PYG{n+nv}{id} \PYG{k}{\PYGZam{}key} \PYG{n+nv}{expand}\PYG{p}{)}
   \PYG{p}{(}\PYG{n+nv}{serialize} \PYG{p}{(}\PYG{n+nv}{find\PYGZhy{}user} \PYG{n+nv}{id}\PYG{p}{)} \PYG{l+s+ss}{:expand} \PYG{n+nv}{expand}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}

And for this POST operation:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{(}\PYG{n+nv}{create\PYGZhy{}user} \PYG{p}{(}\PYG{l+s+ss}{:request\PYGZhy{}method} \PYG{l+s+ss}{:post}
                             \PYG{l+s+ss}{:consumes} \PYG{p}{(}\PYG{l+s+ss}{:json}\PYG{p}{)}
                             \PYG{l+s+ss}{:path} \PYG{l+s}{\PYGZdq{}/users\PYGZdq{}}
                             \PYG{l+s+ss}{:documentation} \PYG{l+s}{\PYGZdq{}Create a user\PYGZdq{}}
                             \PYG{l+s+ss}{:body\PYGZhy{}type} \PYG{n+nv}{user}\PYG{p}{)}
                    \PYG{p}{(}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}

The \sphinxcode{\sphinxupquote{posted\sphinxhyphen{}content}} argument should be included:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{(}\PYG{n+nv}{implement\PYGZhy{}resource\PYGZhy{}operation} \PYG{n+nv}{create\PYGZhy{}user} \PYG{p}{(}\PYG{n+nv}{posted\PYGZhy{}content}\PYG{p}{)}
   \PYG{p}{(}\PYG{n+nv}{with\PYGZhy{}posted\PYGZhy{}content} \PYG{p}{(}\PYG{n+nv}{name} \PYG{n+nv}{age}\PYG{p}{)} \PYG{n+nv}{posted\PYGZhy{}content}
       \PYG{p}{(}\PYG{n+nv}{serialize} \PYG{p}{(}\PYG{n+nv}{model:create\PYGZhy{}user} \PYG{l+s+ss}{:name} \PYG{n+nv}{name} \PYG{l+s+ss}{:age} \PYG{n+nv}{age}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}


\section{Conditional dispatch}
\label{\detokenize{api:conditional-dispatch}}
It is possible to dispatch to a particular resource operation implementation depending on the content type requested by the client in the HTTP Accept header via the {\hyperref[\detokenize{api:function:rest-server:implement-resource-operation-case}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{implement\sphinxhyphen{}resource\sphinxhyphen{}operation\sphinxhyphen{}case}}}}} macro.
\index{implement\sphinxhyphen{}resource\sphinxhyphen{}operation\sphinxhyphen{}case (Lisp function)@\spxentry{implement\sphinxhyphen{}resource\sphinxhyphen{}operation\sphinxhyphen{}case}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:function:rest-server:implement-resource-operation-case}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{implement\sphinxhyphen{}resource\sphinxhyphen{}operation\sphinxhyphen{}case}}\emph{name} \emph{accept\sphinxhyphen{}content\sphinxhyphen{}type} \emph{args} \emph{\&body} \emph{body}}{}
\end{fulllineitems}


Example:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{(}\PYG{n+nv}{implement\PYGZhy{}resource\PYGZhy{}operation} \PYG{n+nv}{api\PYGZhy{}test::api\PYGZhy{}test}
  \PYG{n+nv}{api\PYGZhy{}test::conditional\PYGZhy{}dispatch} \PYG{p}{(}\PYG{p}{)}
\PYG{p}{(}\PYG{n+nb}{error} \PYG{l+s+ss}{\PYGZsq{}http\PYGZhy{}not\PYGZhy{}acceptable\PYGZhy{}error}\PYG{p}{)}\PYG{p}{)}

\PYG{p}{(}\PYG{n+nv}{implement\PYGZhy{}resource\PYGZhy{}operation\PYGZhy{}case}
  \PYG{n+nv}{api\PYGZhy{}test::conditional\PYGZhy{}dispatch} \PYG{l+s}{\PYGZdq{}text/html\PYGZdq{}}
  \PYG{p}{(}\PYG{p}{)}
\PYG{l+s}{\PYGZdq{}\PYGZlt{}p\PYGZgt{}Hello\PYGZlt{}/p\PYGZgt{}\PYGZdq{}}\PYG{p}{)}

\PYG{p}{(}\PYG{n+nv}{implement\PYGZhy{}resource\PYGZhy{}operation\PYGZhy{}case}
  \PYG{n+nv}{api\PYGZhy{}test::conditional\PYGZhy{}dispatch} \PYG{l+s}{\PYGZdq{}application/json\PYGZdq{}}
  \PYG{p}{(}\PYG{p}{)}
\PYG{l+s}{\PYGZdq{}\PYGZbs{}\PYGZdq{}hello\PYGZbs{}\PYGZdq{}\PYGZdq{}}\PYG{p}{)}

\PYG{p}{(}\PYG{n+nv}{implement\PYGZhy{}resource\PYGZhy{}operation\PYGZhy{}case}
  \PYG{n+nv}{api\PYGZhy{}test::conditional\PYGZhy{}dispatch} \PYG{l+s}{\PYGZdq{}application/xml\PYGZdq{}}
  \PYG{p}{(}\PYG{p}{)}
\PYG{l+s}{\PYGZdq{}\PYGZlt{}p\PYGZgt{}Hello\PYGZlt{}/p\PYGZgt{}\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}


\chapter{Starting the API}
\label{\detokenize{api:starting-the-api}}
APIs are started calling the function {\hyperref[\detokenize{api:function:rest-server:start-api}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{start\sphinxhyphen{}api}}}}}
\index{start\sphinxhyphen{}api (Lisp function)@\spxentry{start\sphinxhyphen{}api}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:function:rest-server:start-api}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{start\sphinxhyphen{}api}}\emph{api} \emph{\&rest} \emph{args}}{}
Start an api at address and port.
\begin{quote}

In production mode, we bind the api directly. In debug mode, we only bind the API name in order to be able to make modifications to the api (definition) in development time
\end{quote}

\end{fulllineitems}



\chapter{Accessing the API}
\label{\detokenize{api:accessing-the-api}}
The {\hyperref[\detokenize{api:macro:rest-server:define-api}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{define\sphinxhyphen{}api}}}}} macro creates a function for accessing the api for each resource operation.

Before using the generated functions, the api backend needs to be selected via the {\hyperref[\detokenize{api:macro:rest-server:with-api-backend}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{with\sphinxhyphen{}api\sphinxhyphen{}backend}}}}}.
\index{with\sphinxhyphen{}api\sphinxhyphen{}backend (Lisp macro)@\spxentry{with\sphinxhyphen{}api\sphinxhyphen{}backend}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api:macro:rest-server:with-api-backend}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{macro }}}{\sphinxbfcode{\sphinxupquote{with\sphinxhyphen{}api\sphinxhyphen{}backend}}\emph{backend} \emph{\&body} \emph{body}}{}
Execute the client resource operation calling backend

\end{fulllineitems}


For instance, for the api defined above, an \sphinxcode{\sphinxupquote{get\sphinxhyphen{}user}} and a \sphinxcode{\sphinxupquote{get\sphinxhyphen{}users}} functions are created, which can be used like this:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{(}\PYG{n+nv}{with\PYGZhy{}api\PYGZhy{}backend} \PYG{l+s}{\PYGZdq{}http://localhost/api\PYGZdq{}}
   \PYG{p}{(}\PYG{n+nv}{get\PYGZhy{}user} \PYG{l+m+mi}{22}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}

Assuming the api is running on \sphinxurl{http://localhost/api}


\chapter{Error handling}
\label{\detokenize{error-handling:error-handling}}\label{\detokenize{error-handling::doc}}
APIs can be run with different error handling modes. This is controlled via the argument \sphinxtitleref{:catch\sphinxhyphen{}errors} in {\hyperref[\detokenize{api:function:rest-server:start-api}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{start\sphinxhyphen{}api}}}}}. Default is NIL.
\index{*catch\sphinxhyphen{}errors* (Lisp variable)@\spxentry{*catch\sphinxhyphen{}errors*}\spxextra{Lisp variable}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{error-handling:variable:rest-server:*catch-errors*}}\pysigline{\sphinxbfcode{\sphinxupquote{variable }}\sphinxbfcode{\sphinxupquote{*catch\sphinxhyphen{}errors*}}}
\end{fulllineitems}


If T, then the error is serialize and the corresponding HTTP is returned. Otherwise, when an error occurs, the Lisp debugger is entered.


\section{Global error mode}
\label{\detokenize{error-handling:global-error-mode}}
To setup a global error handling mode, that has precedence to individual running apis error handling modes, set {\hyperref[\detokenize{error-handling:variable:rest-server:*server-catch-errors*}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{*SERVER\sphinxhyphen{}CATCH\sphinxhyphen{}ERRORS*}}}}} variable.
\index{*server\sphinxhyphen{}catch\sphinxhyphen{}errors* (Lisp variable)@\spxentry{*server\sphinxhyphen{}catch\sphinxhyphen{}errors*}\spxextra{Lisp variable}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{error-handling:variable:rest-server:*server-catch-errors*}}\pysigline{\sphinxbfcode{\sphinxupquote{variable }}\sphinxbfcode{\sphinxupquote{*server\sphinxhyphen{}catch\sphinxhyphen{}errors*}}}
\end{fulllineitems}



\chapter{API configuration}
\label{\detokenize{api-configuration:api-configuration}}\label{\detokenize{api-configuration::doc}}
Some aspects of the api can be configured either passing the configuration parameters to the {\hyperref[\detokenize{api:function:rest-server:start-api}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{start\sphinxhyphen{}api}}}}} function, or via the {\hyperref[\detokenize{api-configuration:function:rest-server:configure-api}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{configure\sphinxhyphen{}api}}}}} function.
\index{configure\sphinxhyphen{}api (Lisp function)@\spxentry{configure\sphinxhyphen{}api}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api-configuration:function:rest-server:configure-api}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{configure\sphinxhyphen{}api}}\emph{api\sphinxhyphen{}or\sphinxhyphen{}name} \emph{\&rest} \emph{options}}{}
Configure or reconfigure an already existent api

\end{fulllineitems}



\section{CORS configuration}
\label{\detokenize{api-configuration:cors-configuration}}
APIs can be configured to append \sphinxhref{https://developer.mozilla.org/en-US/docs/Web/HTTP/Access\_control\_CORS}{CORS} headers to responses.

Syntax:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{(}\PYG{n+nv}{configure\PYGZhy{}api} \PYG{n+nv}{api} \PYG{o}{\PYGZsq{}}\PYG{p}{(}\PYG{l+s+ss}{:cors} \PYG{k}{\PYGZam{}rest} \PYG{n+nv}{options}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}


\subsection{Options:}
\label{\detokenize{api-configuration:options}}\begin{itemize}
\item {} 
\sphinxcode{\sphinxupquote{:enabled}}: Boolean. CORS enabled when \sphinxcode{\sphinxupquote{T}}.

\item {} 
\sphinxcode{\sphinxupquote{:allow\sphinxhyphen{}origin}}: The “AllowOrigin” header. Default: \sphinxcode{\sphinxupquote{"*"}}

\item {} 
\sphinxcode{\sphinxupquote{:allow\sphinxhyphen{}headers}}: A list. The “AllowHeaders” header.

\item {} 
\sphinxcode{\sphinxupquote{:allow\sphinxhyphen{}methods}}: A list. The “AllowMethods” header. Default: \sphinxcode{\sphinxupquote{(list :get :put :post :delete)}}

\end{itemize}


\section{Logging configuration}
\label{\detokenize{api-configuration:logging-configuration}}
Log api requests and responses.

Syntax:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{(}\PYG{n+nv}{configure\PYGZhy{}api} \PYG{o}{\PYGZsq{}}\PYG{p}{(}\PYG{l+s+ss}{:logging} \PYG{k}{\PYGZam{}rest} \PYG{n+nv}{options}\PYG{p}{)}\PYG{p}{)}
\end{sphinxVerbatim}

Then evaluate :cl:function::\sphinxtitleref{start\sphinxhyphen{}api\sphinxhyphen{}logging}
\index{start\sphinxhyphen{}api\sphinxhyphen{}logging (Lisp function)@\spxentry{start\sphinxhyphen{}api\sphinxhyphen{}logging}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{api-configuration:function:rest-server:start-api-logging}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{start\sphinxhyphen{}api\sphinxhyphen{}logging}}}{}
\end{fulllineitems}



\chapter{API documentation}
\label{\detokenize{documentation:api-documentation}}\label{\detokenize{documentation::doc}}
There’s an (incomplete) implementation of a \sphinxhref{https://helloreverb.com/developers/swagger}{Swagger} export.

First, configure the api for Swagger:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{(}\PYG{n+nv}{define\PYGZhy{}swagger\PYGZhy{}resource} \PYG{n+nv}{api}\PYG{p}{)}
\end{sphinxVerbatim}

This will enable \sphinxhref{https://developer.mozilla.org/en-US/docs/Web/HTTP/Access\_control\_CORS}{CORS} on the API, as Swagger needs it to make requests.

After this you can download the Swagger documentation tool and point to the api HTTP address.


\chapter{API}
\label{\detokenize{symbols:api}}\label{\detokenize{symbols::doc}}
Rest Server external symbols documentation
\index{configure\sphinxhyphen{}api\sphinxhyphen{}resource (Lisp function)@\spxentry{configure\sphinxhyphen{}api\sphinxhyphen{}resource}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:function:rest-server:configure-api-resource}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{configure\sphinxhyphen{}api\sphinxhyphen{}resource}}\emph{api\sphinxhyphen{}or\sphinxhyphen{}name} \emph{resource\sphinxhyphen{}name} \emph{\&rest} \emph{options}}{}
\end{fulllineitems}

\index{permission\sphinxhyphen{}checking (Lisp macro)@\spxentry{permission\sphinxhyphen{}checking}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:permission-checking}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{macro }}}{\sphinxbfcode{\sphinxupquote{permission\sphinxhyphen{}checking}}\emph{args} \emph{resource\sphinxhyphen{}operation\sphinxhyphen{}implementation}}{}
\end{fulllineitems}

\index{accept\sphinxhyphen{}serializer (Lisp function)@\spxentry{accept\sphinxhyphen{}serializer}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:function:rest-server:accept-serializer}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{accept\sphinxhyphen{}serializer}}}{}
\end{fulllineitems}

\index{serialization (Lisp macro)@\spxentry{serialization}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:serialization}}\pysigline{\sphinxbfcode{\sphinxupquote{macro }}\sphinxbfcode{\sphinxupquote{serialization}}}
\end{fulllineitems}

\index{with\sphinxhyphen{}list\sphinxhyphen{}member (Lisp macro)@\spxentry{with\sphinxhyphen{}list\sphinxhyphen{}member}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:with-list-member}}\pysigline{\sphinxbfcode{\sphinxupquote{macro }}\sphinxbfcode{\sphinxupquote{with\sphinxhyphen{}list\sphinxhyphen{}member}}}
\end{fulllineitems}

\index{implement\sphinxhyphen{}resource\sphinxhyphen{}operation\sphinxhyphen{}case (Lisp macro)@\spxentry{implement\sphinxhyphen{}resource\sphinxhyphen{}operation\sphinxhyphen{}case}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:implement-resource-operation-case}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{macro }}}{\sphinxbfcode{\sphinxupquote{implement\sphinxhyphen{}resource\sphinxhyphen{}operation\sphinxhyphen{}case}}\emph{name} \emph{accept\sphinxhyphen{}content\sphinxhyphen{}type} \emph{args} \emph{\&body} \emph{body}}{}
Implement an resource operation case

\end{fulllineitems}

\index{with\sphinxhyphen{}api (Lisp macro)@\spxentry{with\sphinxhyphen{}api}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:with-api}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{macro }}}{\sphinxbfcode{\sphinxupquote{with\sphinxhyphen{}api}}\emph{api} \emph{\&body} \emph{body}}{}~\begin{description}
\item[{Execute body under api scope.}] \leavevmode
Example:
(with\sphinxhyphen{}api test\sphinxhyphen{}api
\begin{quote}
\begin{description}
\item[{(define\sphinxhyphen{}resource\sphinxhyphen{}operation get\sphinxhyphen{}user :get (:url\sphinxhyphen{}prefix “users/\{id\}”)}] \leavevmode
‘((:id :integer))))

\end{description}
\end{quote}

\end{description}

\end{fulllineitems}

\index{with\sphinxhyphen{}api\sphinxhyphen{}backend (Lisp macro)@\spxentry{with\sphinxhyphen{}api\sphinxhyphen{}backend}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:with-api-backend}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{macro }}}{\sphinxbfcode{\sphinxupquote{with\sphinxhyphen{}api\sphinxhyphen{}backend}}\emph{backend} \emph{\&body} \emph{body}}{}
Execute the client resource operation calling backend

\end{fulllineitems}

\index{implement\sphinxhyphen{}resource\sphinxhyphen{}operation (Lisp macro)@\spxentry{implement\sphinxhyphen{}resource\sphinxhyphen{}operation}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:implement-resource-operation}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{macro }}}{\sphinxbfcode{\sphinxupquote{implement\sphinxhyphen{}resource\sphinxhyphen{}operation}}\emph{api\sphinxhyphen{}name} \emph{name\sphinxhyphen{}and\sphinxhyphen{}options} \emph{args} \emph{\&body} \emph{body}}{}
Define an resource operation implementation

\end{fulllineitems}

\index{set\sphinxhyphen{}reply\sphinxhyphen{}content\sphinxhyphen{}type (Lisp function)@\spxentry{set\sphinxhyphen{}reply\sphinxhyphen{}content\sphinxhyphen{}type}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:function:rest-server:set-reply-content-type}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{set\sphinxhyphen{}reply\sphinxhyphen{}content\sphinxhyphen{}type}}\emph{content\sphinxhyphen{}type}}{}
\end{fulllineitems}

\index{with\sphinxhyphen{}serializer\sphinxhyphen{}output (Lisp macro)@\spxentry{with\sphinxhyphen{}serializer\sphinxhyphen{}output}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:with-serializer-output}}\pysigline{\sphinxbfcode{\sphinxupquote{macro }}\sphinxbfcode{\sphinxupquote{with\sphinxhyphen{}serializer\sphinxhyphen{}output}}}
\end{fulllineitems}

\index{http\sphinxhyphen{}error (Lisp function)@\spxentry{http\sphinxhyphen{}error}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:function:rest-server:http-error}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{http\sphinxhyphen{}error}}}{}
\end{fulllineitems}

\index{define\sphinxhyphen{}schema (Lisp macro)@\spxentry{define\sphinxhyphen{}schema}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:define-schema}}\pysigline{\sphinxbfcode{\sphinxupquote{macro }}\sphinxbfcode{\sphinxupquote{define\sphinxhyphen{}schema}}}
\end{fulllineitems}

\index{disable\sphinxhyphen{}api\sphinxhyphen{}logging (Lisp function)@\spxentry{disable\sphinxhyphen{}api\sphinxhyphen{}logging}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:function:rest-server:disable-api-logging}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{disable\sphinxhyphen{}api\sphinxhyphen{}logging}}}{}
\end{fulllineitems}

\index{format\sphinxhyphen{}absolute\sphinxhyphen{}resource\sphinxhyphen{}operation\sphinxhyphen{}url (Lisp function)@\spxentry{format\sphinxhyphen{}absolute\sphinxhyphen{}resource\sphinxhyphen{}operation\sphinxhyphen{}url}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:function:rest-server:format-absolute-resource-operation-url}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{format\sphinxhyphen{}absolute\sphinxhyphen{}resource\sphinxhyphen{}operation\sphinxhyphen{}url}}\emph{resource\sphinxhyphen{}operation} \emph{\&rest} \emph{args}}{}
\end{fulllineitems}

\index{boolean\sphinxhyphen{}value (Lisp function)@\spxentry{boolean\sphinxhyphen{}value}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:function:rest-server:boolean-value}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{boolean\sphinxhyphen{}value}}}{}
\end{fulllineitems}

\index{start\sphinxhyphen{}api\sphinxhyphen{}documentation (Lisp function)@\spxentry{start\sphinxhyphen{}api\sphinxhyphen{}documentation}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:function:rest-server:start-api-documentation}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{start\sphinxhyphen{}api\sphinxhyphen{}documentation}}\emph{api} \emph{address} \emph{port}}{}
Start a web documentation application on the given api.

\end{fulllineitems}

\index{list\sphinxhyphen{}value (Lisp function)@\spxentry{list\sphinxhyphen{}value}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:function:rest-server:list-value}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{list\sphinxhyphen{}value}}}{}
\end{fulllineitems}

\index{find\sphinxhyphen{}schema (Lisp function)@\spxentry{find\sphinxhyphen{}schema}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:function:rest-server:find-schema}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{find\sphinxhyphen{}schema}}}{}
\end{fulllineitems}

\index{with\sphinxhyphen{}xml\sphinxhyphen{}reply (Lisp macro)@\spxentry{with\sphinxhyphen{}xml\sphinxhyphen{}reply}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:with-xml-reply}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{macro }}}{\sphinxbfcode{\sphinxupquote{with\sphinxhyphen{}xml\sphinxhyphen{}reply}}\emph{\&body} \emph{body}}{}
\end{fulllineitems}

\index{self\sphinxhyphen{}reference (Lisp function)@\spxentry{self\sphinxhyphen{}reference}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:function:rest-server:self-reference}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{self\sphinxhyphen{}reference}}\emph{\&rest} \emph{args}}{}
\end{fulllineitems}

\index{unserialization (Lisp macro)@\spxentry{unserialization}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:unserialization}}\pysigline{\sphinxbfcode{\sphinxupquote{macro }}\sphinxbfcode{\sphinxupquote{unserialization}}}
\end{fulllineitems}

\index{find\sphinxhyphen{}api (Lisp function)@\spxentry{find\sphinxhyphen{}api}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:function:rest-server:find-api}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{find\sphinxhyphen{}api}}\emph{name} \emph{\&key}}{\emph{error\sphinxhyphen{}p} \emph{t}}{}{}
Find api by name

\end{fulllineitems}

\index{fetch\sphinxhyphen{}content (Lisp macro)@\spxentry{fetch\sphinxhyphen{}content}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:fetch-content}}\pysigline{\sphinxbfcode{\sphinxupquote{macro }}\sphinxbfcode{\sphinxupquote{fetch\sphinxhyphen{}content}}}
\end{fulllineitems}

\index{serializable\sphinxhyphen{}class\sphinxhyphen{}schema (Lisp function)@\spxentry{serializable\sphinxhyphen{}class\sphinxhyphen{}schema}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:function:rest-server:serializable-class-schema}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{serializable\sphinxhyphen{}class\sphinxhyphen{}schema}}}{}
\end{fulllineitems}

\index{stop\sphinxhyphen{}api (Lisp function)@\spxentry{stop\sphinxhyphen{}api}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:function:rest-server:stop-api}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{stop\sphinxhyphen{}api}}\emph{api\sphinxhyphen{}acceptor}}{}
\end{fulllineitems}

\index{make\sphinxhyphen{}resource\sphinxhyphen{}operation (Lisp function)@\spxentry{make\sphinxhyphen{}resource\sphinxhyphen{}operation}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:function:rest-server:make-resource-operation}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{make\sphinxhyphen{}resource\sphinxhyphen{}operation}}\emph{name} \emph{attributes} \emph{args} \emph{options}}{}
Make an resource operation.

\end{fulllineitems}

\index{configure\sphinxhyphen{}resource\sphinxhyphen{}operation\sphinxhyphen{}implementation (Lisp function)@\spxentry{configure\sphinxhyphen{}resource\sphinxhyphen{}operation\sphinxhyphen{}implementation}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:function:rest-server:configure-resource-operation-implementation}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{configure\sphinxhyphen{}resource\sphinxhyphen{}operation\sphinxhyphen{}implementation}}\emph{name} \emph{\&rest} \emph{options}}{}
Configure or reconfigure an already existent resource operation implementation

\end{fulllineitems}

\index{configure\sphinxhyphen{}api (Lisp function)@\spxentry{configure\sphinxhyphen{}api}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:function:rest-server:configure-api}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{configure\sphinxhyphen{}api}}\emph{api\sphinxhyphen{}or\sphinxhyphen{}name} \emph{\&rest} \emph{options}}{}
Configure or reconfigure an already existent api

\end{fulllineitems}

\index{validation\sphinxhyphen{}error (Lisp function)@\spxentry{validation\sphinxhyphen{}error}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:function:rest-server:validation-error}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{validation\sphinxhyphen{}error}}}{}
\end{fulllineitems}

\index{stop\sphinxhyphen{}api\sphinxhyphen{}logging (Lisp function)@\spxentry{stop\sphinxhyphen{}api\sphinxhyphen{}logging}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:function:rest-server:stop-api-logging}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{stop\sphinxhyphen{}api\sphinxhyphen{}logging}}}{}
\end{fulllineitems}

\index{elements (Lisp function)@\spxentry{elements}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:function:rest-server:elements}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{elements}}}{}
\end{fulllineitems}

\index{logging (Lisp macro)@\spxentry{logging}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:logging}}\pysigline{\sphinxbfcode{\sphinxupquote{macro }}\sphinxbfcode{\sphinxupquote{logging}}}
\end{fulllineitems}

\index{start\sphinxhyphen{}api (Lisp function)@\spxentry{start\sphinxhyphen{}api}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:function:rest-server:start-api}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{start\sphinxhyphen{}api}}\emph{api} \emph{\&rest} \emph{args}}{}
Start an api at address and port.
\begin{quote}

In production mode, we bind the api directly. In debug mode, we only bind the API name in order to be able to make modifications to the api (definition) in development time
\end{quote}

\end{fulllineitems}

\index{set\sphinxhyphen{}attribute (Lisp function)@\spxentry{set\sphinxhyphen{}attribute}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:function:rest-server:set-attribute}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{set\sphinxhyphen{}attribute}}}{}
\end{fulllineitems}

\index{add\sphinxhyphen{}list\sphinxhyphen{}member (Lisp function)@\spxentry{add\sphinxhyphen{}list\sphinxhyphen{}member}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:function:rest-server:add-list-member}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{add\sphinxhyphen{}list\sphinxhyphen{}member}}}{}
\end{fulllineitems}

\index{with\sphinxhyphen{}attribute (Lisp macro)@\spxentry{with\sphinxhyphen{}attribute}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:with-attribute}}\pysigline{\sphinxbfcode{\sphinxupquote{macro }}\sphinxbfcode{\sphinxupquote{with\sphinxhyphen{}attribute}}}
\end{fulllineitems}

\index{with\sphinxhyphen{}json\sphinxhyphen{}reply (Lisp macro)@\spxentry{with\sphinxhyphen{}json\sphinxhyphen{}reply}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:with-json-reply}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{macro }}}{\sphinxbfcode{\sphinxupquote{with\sphinxhyphen{}json\sphinxhyphen{}reply}}\emph{\&body} \emph{body}}{}
\end{fulllineitems}

\index{with\sphinxhyphen{}list (Lisp macro)@\spxentry{with\sphinxhyphen{}list}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:with-list}}\pysigline{\sphinxbfcode{\sphinxupquote{macro }}\sphinxbfcode{\sphinxupquote{with\sphinxhyphen{}list}}}
\end{fulllineitems}

\index{define\sphinxhyphen{}resource\sphinxhyphen{}operation (Lisp macro)@\spxentry{define\sphinxhyphen{}resource\sphinxhyphen{}operation}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:define-resource-operation}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{macro }}}{\sphinxbfcode{\sphinxupquote{define\sphinxhyphen{}resource\sphinxhyphen{}operation}}\emph{name} \emph{attributes} \emph{args} \emph{\&rest} \emph{options}}{}
Helper macro to define an resource operation

\end{fulllineitems}

\index{schema (Lisp macro)@\spxentry{schema}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:schema}}\pysigline{\sphinxbfcode{\sphinxupquote{macro }}\sphinxbfcode{\sphinxupquote{schema}}}
\end{fulllineitems}

\index{enable\sphinxhyphen{}api\sphinxhyphen{}logging (Lisp function)@\spxentry{enable\sphinxhyphen{}api\sphinxhyphen{}logging}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:function:rest-server:enable-api-logging}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{enable\sphinxhyphen{}api\sphinxhyphen{}logging}}}{}
\end{fulllineitems}

\index{define\sphinxhyphen{}serializable\sphinxhyphen{}class (Lisp macro)@\spxentry{define\sphinxhyphen{}serializable\sphinxhyphen{}class}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:define-serializable-class}}\pysigline{\sphinxbfcode{\sphinxupquote{macro }}\sphinxbfcode{\sphinxupquote{define\sphinxhyphen{}serializable\sphinxhyphen{}class}}}
\end{fulllineitems}

\index{validation (Lisp macro)@\spxentry{validation}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:validation}}\pysigline{\sphinxbfcode{\sphinxupquote{macro }}\sphinxbfcode{\sphinxupquote{validation}}}
\end{fulllineitems}

\index{error\sphinxhyphen{}handling (Lisp macro)@\spxentry{error\sphinxhyphen{}handling}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:error-handling}}\pysigline{\sphinxbfcode{\sphinxupquote{macro }}\sphinxbfcode{\sphinxupquote{error\sphinxhyphen{}handling}}}
\end{fulllineitems}

\index{with\sphinxhyphen{}permission\sphinxhyphen{}checking (Lisp macro)@\spxentry{with\sphinxhyphen{}permission\sphinxhyphen{}checking}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:with-permission-checking}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{macro }}}{\sphinxbfcode{\sphinxupquote{with\sphinxhyphen{}permission\sphinxhyphen{}checking}}\emph{check} \emph{\&body} \emph{body}}{}
\end{fulllineitems}

\index{with\sphinxhyphen{}serializer (Lisp macro)@\spxentry{with\sphinxhyphen{}serializer}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:with-serializer}}\pysigline{\sphinxbfcode{\sphinxupquote{macro }}\sphinxbfcode{\sphinxupquote{with\sphinxhyphen{}serializer}}}
\end{fulllineitems}

\index{define\sphinxhyphen{}api\sphinxhyphen{}resource (Lisp macro)@\spxentry{define\sphinxhyphen{}api\sphinxhyphen{}resource}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:define-api-resource}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{macro }}}{\sphinxbfcode{\sphinxupquote{define\sphinxhyphen{}api\sphinxhyphen{}resource}}\emph{name} \emph{options} \emph{\&body} \emph{functions}}{}
Define an api resource.

\end{fulllineitems}

\index{start\sphinxhyphen{}api\sphinxhyphen{}logging (Lisp function)@\spxentry{start\sphinxhyphen{}api\sphinxhyphen{}logging}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:function:rest-server:start-api-logging}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{start\sphinxhyphen{}api\sphinxhyphen{}logging}}}{}
\end{fulllineitems}

\index{define\sphinxhyphen{}swagger\sphinxhyphen{}resource (Lisp macro)@\spxentry{define\sphinxhyphen{}swagger\sphinxhyphen{}resource}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:define-swagger-resource}}\pysigline{\sphinxbfcode{\sphinxupquote{macro }}\sphinxbfcode{\sphinxupquote{define\sphinxhyphen{}swagger\sphinxhyphen{}resource}}}
\end{fulllineitems}

\index{with\sphinxhyphen{}element (Lisp macro)@\spxentry{with\sphinxhyphen{}element}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:with-element}}\pysigline{\sphinxbfcode{\sphinxupquote{macro }}\sphinxbfcode{\sphinxupquote{with\sphinxhyphen{}element}}}
\end{fulllineitems}

\index{*catch\sphinxhyphen{}errors* (Lisp variable)@\spxentry{*catch\sphinxhyphen{}errors*}\spxextra{Lisp variable}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:variable:rest-server:*catch-errors*}}\pysigline{\sphinxbfcode{\sphinxupquote{variable }}\sphinxbfcode{\sphinxupquote{*catch\sphinxhyphen{}errors*}}}
\end{fulllineitems}

\index{caching (Lisp macro)@\spxentry{caching}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:caching}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{macro }}}{\sphinxbfcode{\sphinxupquote{caching}}\emph{args} \emph{resource\sphinxhyphen{}operation\sphinxhyphen{}implementation}}{}
\end{fulllineitems}

\index{with\sphinxhyphen{}api\sphinxhyphen{}resource (Lisp macro)@\spxentry{with\sphinxhyphen{}api\sphinxhyphen{}resource}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:with-api-resource}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{macro }}}{\sphinxbfcode{\sphinxupquote{with\sphinxhyphen{}api\sphinxhyphen{}resource}}\emph{resource} \emph{\&body} \emph{body}}{}~\begin{description}
\item[{Execute body under resource scope.}] \leavevmode
Example:
(with\sphinxhyphen{}api\sphinxhyphen{}resource users
\begin{quote}
\begin{description}
\item[{(define\sphinxhyphen{}resource\sphinxhyphen{}operation get\sphinxhyphen{}user :get (:url\sphinxhyphen{}prefix “users/\{id\}”)}] \leavevmode
‘((:id :integer))))

\end{description}
\end{quote}

\end{description}

\end{fulllineitems}

\index{with\sphinxhyphen{}content (Lisp macro)@\spxentry{with\sphinxhyphen{}content}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:with-content}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{macro }}}{\sphinxbfcode{\sphinxupquote{with\sphinxhyphen{}content}}}{\emph{\&key}}{\emph{setter}}{}{ \emph{\&body} \emph{body}}{}
Macro to build HTTP content to pass in client functions.

Example:
\begin{description}
\item[{(with\sphinxhyphen{}api\sphinxhyphen{}backend \sphinxstyleemphasis{api\sphinxhyphen{}backend}}] \leavevmode\begin{description}
\item[{(let ((content (with\sphinxhyphen{}content ()}] \leavevmode
(:= :name “name”)
(when some\sphinxhyphen{}condition
\begin{quote}

(:= :attr 22)))))
\end{quote}

\end{description}

(app.api\sphinxhyphen{}client:my\sphinxhyphen{}client\sphinxhyphen{}function :content content)))

\end{description}

\end{fulllineitems}

\index{with\sphinxhyphen{}pagination (Lisp macro)@\spxentry{with\sphinxhyphen{}pagination}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:with-pagination}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{macro }}}{\sphinxbfcode{\sphinxupquote{with\sphinxhyphen{}pagination}}}{\emph{\&rest} \emph{args} \emph{\&key}}{\emph{page}}{}{\emph{object\sphinxhyphen{}name}}{ \emph{\&allow\sphinxhyphen{}other\sphinxhyphen{}keys}}{ \emph{\&body} \emph{body}}{}
\end{fulllineitems}

\index{define\sphinxhyphen{}api (Lisp macro)@\spxentry{define\sphinxhyphen{}api}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:define-api}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{macro }}}{\sphinxbfcode{\sphinxupquote{define\sphinxhyphen{}api}}\emph{name} \emph{superclasses} \emph{options} \emph{\&body} \emph{resources}}{}
Define an api.

\end{fulllineitems}

\index{element (Lisp function)@\spxentry{element}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:function:rest-server:element}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{element}}}{}
\end{fulllineitems}

\index{attribute (Lisp function)@\spxentry{attribute}\spxextra{Lisp function}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:function:rest-server:attribute}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{function }}}{\sphinxbfcode{\sphinxupquote{attribute}}}{}
\end{fulllineitems}

\index{*server\sphinxhyphen{}catch\sphinxhyphen{}errors* (Lisp variable)@\spxentry{*server\sphinxhyphen{}catch\sphinxhyphen{}errors*}\spxextra{Lisp variable}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:variable:rest-server:*server-catch-errors*}}\pysigline{\sphinxbfcode{\sphinxupquote{variable }}\sphinxbfcode{\sphinxupquote{*server\sphinxhyphen{}catch\sphinxhyphen{}errors*}}}
\end{fulllineitems}

\index{with\sphinxhyphen{}reply\sphinxhyphen{}content\sphinxhyphen{}type (Lisp macro)@\spxentry{with\sphinxhyphen{}reply\sphinxhyphen{}content\sphinxhyphen{}type}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:with-reply-content-type}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{macro }}}{\sphinxbfcode{\sphinxupquote{with\sphinxhyphen{}reply\sphinxhyphen{}content\sphinxhyphen{}type}}}{\emph{content\sphinxhyphen{}type}}{ \emph{\&body} \emph{body}}{}
\end{fulllineitems}

\index{with\sphinxhyphen{}posted\sphinxhyphen{}content (Lisp macro)@\spxentry{with\sphinxhyphen{}posted\sphinxhyphen{}content}\spxextra{Lisp macro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{symbols:macro:rest-server:with-posted-content}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{macro }}}{\sphinxbfcode{\sphinxupquote{with\sphinxhyphen{}posted\sphinxhyphen{}content}}\emph{args} \emph{posted\sphinxhyphen{}content} \emph{\&body} \emph{body}}{}
Bind \sphinxcode{\sphinxupquote{ARGS}} to \sphinxcode{\sphinxupquote{POSTED\sphinxhyphen{}CONTENT}}. \sphinxcode{\sphinxupquote{POSTED\sphinxhyphen{}CONTENT}} is supposed to be an alist.
Also, argx\sphinxhyphen{}P is \sphinxhref{http://www.lispworks.com/reference/HyperSpec/Body/a\_t.htm}{\sphinxcode{\sphinxupquote{T}}} iff argx is present in \sphinxcode{\sphinxupquote{POSTED\sphinxhyphen{}CONTENT}}

\end{fulllineitems}



\chapter{Indices and tables}
\label{\detokenize{index:indices-and-tables}}\begin{itemize}
\item {} 
\DUrole{xref,std,std-ref}{genindex}

\item {} 
\DUrole{xref,std,std-ref}{search}

\end{itemize}



\renewcommand{\indexname}{Index}
\printindex
\end{document}